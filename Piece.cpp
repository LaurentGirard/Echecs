/**
* @file Piece.cpp
* @author P. Sullivan, G.Laurent
* @since 25/12/2015
* @brief implémentation des méthodes de la classe Piece
*
**/

#include "Piece.hpp"

//------------------------------------------------------------------------------------------------------
//----------------------------- CLASS PIECE ------------------------------------------------------------
//------------------------------------------------------------------------------------------------------

Piece::Piece(unsigned int x, unsigned int y) : alive(true) 
{
	square = new Cell(x,y);
}

//------------------------------------------------------------------------------------------------------
Piece::~Piece(){}

//------------------------------------------------------------------------------------------------------
Cell* Piece::getSquare()
{
	return square;
}

//------------------------------------------------------------------------------------------------------
void Piece::setSquare(Cell* newCell)
{
	square->setX(newCell->getX());
	square->setY(newCell->getY());
}

//------------------------------------------------------------------------------------------------------
bool Piece::asAlive()
{
	return alive;
}

//------------------------------------------------------------------------------------------------------
void Piece::setAlive(bool newAlive)
{
	alive = newAlive;
}
//------------------------------------------------------------------------------------------------------
void Piece::printPiece()
{
	std::cout << "X position : " << square->getX() << std::endl;
	std::cout << "Y position : " << square->getY() << std::endl;
}

//------------------------------------------------------------------------------------------------------
void Piece::move(Cell* dest){}

//------------------------------------------------------------------------------------------------------
//----------------------------- CLASS SPAWN -------------------------------------------------------------
//------------------------------------------------------------------------------------------------------

Spawn::Spawn(unsigned int x, unsigned int y) : Piece(x,y) {}

//------------------------------------------------------------------------------------------------------
Spawn::~Spawn(){}

//------------------------------------------------------------------------------------------------------
void Spawn::move(Cell* dest)
{
    square->setX(dest->getX());
    square->setY(dest->getY());
}

//------------------------------------------------------------------------------------------------------
bool Spawn::destination(Cell* dest)
{
	// TO DO
    return false;
}

//------------------------------------------------------------------------------------------------------
//----------------------------- CLASS ROOK -------------------------------------------------------------
//------------------------------------------------------------------------------------------------------

Rook::Rook(unsigned int x, unsigned int y) : Piece(x,y), _moved(0) {}

//------------------------------------------------------------------------------------------------------
Rook::~Rook(){}

//------------------------------------------------------------------------------------------------------
bool Rook::asMoved()
{
	return _moved;
}

//------------------------------------------------------------------------------------------------------
void Rook::setMoved(bool newMoved)
{
	_moved = newMoved;
}

//------------------------------------------------------------------------------------------------------
void Rook::move(Cell* dest)
{
    square->setX(dest->getX());
    square->setY(dest->getY());
}

//------------------------------------------------------------------------------------------------------
bool Rook::destination(Cell* dest)
{
	// TO DO
    return false;
}

//------------------------------------------------------------------------------------------------------
//----------------------------- CLASS KNIGHT -----------------------------------------------------------
//------------------------------------------------------------------------------------------------------

Knight::Knight(unsigned int x, unsigned int y) : Piece(x,y) {}

//------------------------------------------------------------------------------------------------------
Knight::~Knight(){}

//------------------------------------------------------------------------------------------------------
void Knight::move(Cell* dest)
{
	// TO DO
    /*square->setX(dest->getX());
    square->setY(dest->getY());*/
}

//------------------------------------------------------------------------------------------------------
bool Knight::destination(Cell* dest)
{
	// TO DO
        return false;
}

//------------------------------------------------------------------------------------------------------
//----------------------------- CLASS BISHOP -----------------------------------------------------------
//------------------------------------------------------------------------------------------------------

Bishop::Bishop(unsigned int x, unsigned int y) : Piece(x,y) {}

//------------------------------------------------------------------------------------------------------
Bishop::~Bishop(){}

//------------------------------------------------------------------------------------------------------
void Bishop::move(Cell* dest)
{
	// TO DO
    /*square->setX(dest->getX());
    square->setY(dest->getY());*/
}

//------------------------------------------------------------------------------------------------------
bool Bishop::destination(Cell* dest)
{
	// TO DO
    return false;
}

//------------------------------------------------------------------------------------------------------
//----------------------------- CLASS QUEEN ------------------------------------------------------------
//------------------------------------------------------------------------------------------------------

Queen::Queen(unsigned int x, unsigned int y) : Piece(x,y) {}

//------------------------------------------------------------------------------------------------------
Queen::~Queen(){}

//------------------------------------------------------------------------------------------------------
void Queen::move(Cell* dest)
{
	// TO DO
    /*square->setX(dest->getX());
    square->setY(dest->getY());*/
}

//------------------------------------------------------------------------------------------------------
bool Queen::destination(Cell* dest)
{
	// TO DO
    return false;
}

//------------------------------------------------------------------------------------------------------
//----------------------------- CLASS KING -------------------------------------------------------------
//------------------------------------------------------------------------------------------------------

King::King(unsigned int x, unsigned int y) : Piece(x,y), _moved(0) {}

//------------------------------------------------------------------------------------------------------
King::~King(){}

//------------------------------------------------------------------------------------------------------
bool King::asMoved()
{
	return _moved;
}

//------------------------------------------------------------------------------------------------------
void King::setMoved(bool newMoved)
{
	_moved = newMoved;
}

//------------------------------------------------------------------------------------------------------
void King::move(Cell* dest)
{
    square->setX(dest->getX());
    square->setY(dest->getY());
}

//------------------------------------------------------------------------------------------------------
bool King::destination(Cell* dest)
{
	if( (dest->getX()-square->getX() == 1) && (dest->getY()-square->getY() > -2) && (dest->getY()-square->getY() < 2) )
		return true;
	else if( (dest->getX()-square->getX() == 0) && ( (dest->getY()-square->getY() == 1) || (dest->getY()-square->getY() == -1)) )
        return true;
    else if( (dest->getX()-square->getX() == -1) && (dest->getY()-square->getY() > -2) && (dest->getY()-square->getY() < 2) )
        return true;
    else
        return false;
}